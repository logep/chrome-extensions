function arrMinNum(t){for(var e=1/0,a=-1,r="",n=0;n<t.length;n++)"string"==typeof t[n]?t[n].charCodeAt()<e&&(e=t[n].attr2.charCodeAt(),r=t[n],a=n):t[n]<e&&(e=t[n].attr2,r=t[n],a=n);return{minNum:r,index:a}}function arrSortMinToMax(t){for(var e=[],a=t.concat(),r=0;r<t.length;r++)e.push(arrMinNum(a).minNum),a.splice(arrMinNum(a).index,1);return e}function arrMaxNum(t){for(var e=-1/0,a=-1,r="",n=0;n<t.length;n++)"string"==typeof t[n].attr2.charCodeAt()?t[n].attr2.charCodeAt().localeCompare(e)&&(e=t[n].attr2.charCodeAt(),r=t[n],a=n):t[n].attr2.localeCompare(e)&&(e=t[n].attr2.charCodeAt(),r=t[n],a=n);return{maxNum:r,index:a}}function arrSortMaxToMin(t){for(var e=[],a=t.slice(0),r=0;r<t.length;r++)e.push(arrMaxNum(a).maxNum),a.splice(arrMaxNum(a).index,1);return e}function notifyDingDing(){var t=(new Date).getTime(),e="SECc08677417e75e189b0f5696ed314d8f6794087c90da53b4eedee086a2166b24a";let a=CryptoJS.HmacSHA256(t+"\n"+e,e);console.log("============================");e=decodeURI(a.toString(CryptoJS.enc.Base64));console.log(e),fetch(`
https://oapi.dingtalk.com/robot/send?
access_token=28920bd86201990d2b5b6c6a7b1d494940a97ddde2cd91a78617d3b0a1b54fd8&timestamp=${t}&sign=${e}
`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({msgtype:"feedCard",feedCard:{links:[{title:"时通知成功代的火车向前开1",messageURL:"https://www.dingtalk.com/",picURL:"https://img.alicdn.com/tfs/TB1NwmBEL9TBuNjy1zbXXXpepXa-2400-1218.png"},{title:"时代的火车向前开2",messageURL:"https://www.dingtalk.com/",picURL:"https://img.alicdn.com/tfs/TB1NwmBEL9TBuNjy1zbXXXpepXa-2400-1218.png"}]}}),credentials:"include"})}function Base641(){_keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",this.encode=function(t){var e,a,r,n,o,i,c="",d=0;for(t=_utf8_encode(t);d<t.length;)r=(i=t.charCodeAt(d++))>>2,n=(3&i)<<4|(e=t.charCodeAt(d++))>>4,o=(15&e)<<2|(a=t.charCodeAt(d++))>>6,i=63&a,isNaN(e)?o=i=64:isNaN(a)&&(i=64),c=c+_keyStr.charAt(r)+_keyStr.charAt(n)+_keyStr.charAt(o)+_keyStr.charAt(i);return c},this.decode=function(t){var e,a,r,n,o,i,c="",d=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<t.length;)r=_keyStr.indexOf(t.charAt(d++)),e=(15&(n=_keyStr.indexOf(t.charAt(d++))))<<4|(o=_keyStr.indexOf(t.charAt(d++)))>>2,a=(3&o)<<6|(i=_keyStr.indexOf(t.charAt(d++))),c+=String.fromCharCode(r<<2|n>>4),64!=o&&(c+=String.fromCharCode(e)),64!=i&&(c+=String.fromCharCode(a));return c=_utf8_decode(c)},_utf8_encode=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",a=0;a<t.length;a++){var r=t.charCodeAt(a);r<128?e+=String.fromCharCode(r):(127<r&&r<2048?e+=String.fromCharCode(r>>6|192):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128)),e+=String.fromCharCode(63&r|128))}return e},_utf8_decode=function(t){var e,a="",r=0;for(c1=c2=0;r<t.length;)(e=t.charCodeAt(r))<128?(a+=String.fromCharCode(e),r++):191<e&&e<224?(c2=t.charCodeAt(r+1),a+=String.fromCharCode((31&e)<<6|63&c2),r+=2):(c2=t.charCodeAt(r+1),c3=t.charCodeAt(r+2),a+=String.fromCharCode((15&e)<<12|(63&c2)<<6|63&c3),r+=3);return a}}function submit(){var t=$("#popupName").val(),e=$("#popupDesc").val(),a=$("#popupLink").val();t&&e&&a&&(a=JSON.stringify({type:9,attr2:$("#popupName").val(),attr16:"app_token",attr3:$("#popupDesc").val(),attr4:$("#popupLink").val()}),$.ajax({url:"https://9ping.cn/m.api",data:"_gp=admin.anyattr&_mt=insertObj&anyAttrDTO="+a,type:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},cache:"false",dataType:"json",success:function(t){getList(),$(".popupDialog").addClass("hidden")},error:function(t){console.log(t)}}))}$(function(){"true"===localStorage.view_change&&$(".main-cnt").addClass("viewChange"),getList(),$("#keyword").on("input",function(){""!=$("#keyword").val()?compList(globalList.filter(t=>0<=t.attr2.toLowerCase().indexOf($("#keyword").val().toLowerCase()))):compList(globalList)}),$(".flexBtnCancel").on("click",function(t){$(".popupDialog").addClass("hidden")}),$(".flexBtn").on("click",function(t){submit()}),$("#goCart").on("click",function(t){$(".main-cnt").hasClass("viewChange")?(localStorage.view_change="",$(".main-cnt").removeClass("viewChange")):($(".main-cnt").addClass("viewChange"),localStorage.view_change="true")}),$("#feedback").on("click",function(t){notifyDingDing(),$(".popupDialog").removeClass("hidden")})});let globalList=[];function compList(e){e=e.sort(function(t,e){return t.attr2.localeCompare(e.attr2)});let a="";for(let t=0;t<e.length;t++){var r=e[t].attr2?e[t].attr2.substr(0,1):"无";a+=`
				<li>
                    <div class="card calculateSiteBook">
                  <img src="static/resource.a72b8f8.png"> 
                  <div class="titleCard">${r}</div> 
                        <h3 title="${e[t].attr2}">${e[t].attr2}</h3>
                        <p title="${e[t].attr2}">${e[t].attr3}</p>
                        <a href="${e[t].attr4}" class="assetId">查看详情</a>
                         <div class="num">${t+1}</div>
                    </div>
                </li>
				`}$("#cardDepartSite").html(a),$(".assetId").on("click",function(t){t.preventDefault(),chrome.tabs.create({url:t.currentTarget.href})})}function getList(){$.ajax({url:"https://9ping.cn/m.api",data:"_gp=admin.anyattr&_mt=getList&attr16=app_token&type=9",type:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"},cache:"false",dataType:"json",success:function(t){compList(t.data),globalList=t.data},error:function(t){console.log(t)}})}